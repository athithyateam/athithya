# Post Reactions - Visual Flow Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend (React)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Post Component                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  [ğŸ”¥ 5] [â¤ï¸ 12] [ğŸ‘ 3] [ğŸ˜ 8] [ğŸ˜± 2] [ğŸ‘ 1]     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â†‘active   (reaction buttons with counts)         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  User clicks emoji â†’ toggleReaction(emoji)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP Request
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Layer (Express)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PUT /posts/:id/react                                            â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€ Check Authentication (JWT Token)                            â”‚
â”‚  â”œâ”€ Validate Emoji                                               â”‚
â”‚  â”œâ”€ Find Post                                                    â”‚
â”‚  â”œâ”€ Check Existing Reaction                                      â”‚
â”‚  â”‚                                                                â”‚
â”‚  â””â”€ Action Logic:                                                â”‚
â”‚     â”œâ”€ No existing â†’ ADD new reaction                           â”‚
â”‚     â”œâ”€ Same emoji â†’ REMOVE reaction                             â”‚
â”‚     â””â”€ Different emoji â†’ UPDATE reaction                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ Database Query
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Database (MongoDB)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Post Document:                                                  â”‚
â”‚  {                                                                â”‚
â”‚    _id: "507f1f77bcf86cd799439011",                             â”‚
â”‚    title: "Amazing Trek",                                        â”‚
â”‚    reactions: [                                                  â”‚
â”‚      {                                                            â”‚
â”‚        user: "507f...",                                          â”‚
â”‚        name: "John Doe",                                         â”‚
â”‚        emoji: "ğŸ”¥",                                             â”‚
â”‚        timestamp: "2026-01-09T10:30:00Z"                        â”‚
â”‚      },                                                           â”‚
â”‚      { ... more reactions ... }                                  â”‚
â”‚    ]                                                             â”‚
â”‚  }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ Response Data
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Response to Frontend                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  {                                                                â”‚
â”‚    success: true,                                                â”‚
â”‚    action: "added",                                              â”‚
â”‚    reactions: [...],                                             â”‚
â”‚    reactionStats: {                                              â”‚
â”‚      "ğŸ”¥": 5,                                                   â”‚
â”‚      "â¤ï¸": 12,                                                  â”‚
â”‚      "ğŸ‘": 3                                                    â”‚
â”‚    },                                                            â”‚
â”‚    totalReactions: 31,                                           â”‚
â”‚    userReaction: "ğŸ”¥"                                           â”‚
â”‚  }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ Update UI
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI Updates with New Counts                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Reaction Flow States

### 1ï¸âƒ£ No Existing Reaction â†’ Add New

```
User State: No reaction
User Action: Clicks ğŸ”¥

Before:
reactions: [
  { user: "other1", emoji: "â¤ï¸" },
  { user: "other2", emoji: "ğŸ‘" }
]

After:
reactions: [
  { user: "other1", emoji: "â¤ï¸" },
  { user: "other2", emoji: "ğŸ‘" },
  { user: "current", emoji: "ğŸ”¥", name: "John Doe" } â† Added
]

Result: "Reaction added"
```

### 2ï¸âƒ£ Same Emoji â†’ Remove Reaction

```
User State: Has reacted with ğŸ”¥
User Action: Clicks ğŸ”¥ again

Before:
reactions: [
  { user: "current", emoji: "ğŸ”¥" }, â† Current user
  { user: "other1", emoji: "â¤ï¸" },
  { user: "other2", emoji: "ğŸ‘" }
]

After:
reactions: [
  { user: "other1", emoji: "â¤ï¸" },
  { user: "other2", emoji: "ğŸ‘" }
]
â† Removed

Result: "Reaction removed"
```

### 3ï¸âƒ£ Different Emoji â†’ Update Reaction

```
User State: Has reacted with ğŸ”¥
User Action: Clicks â¤ï¸

Before:
reactions: [
  { user: "current", emoji: "ğŸ”¥" }, â† Current user
  { user: "other1", emoji: "â¤ï¸" },
  { user: "other2", emoji: "ğŸ‘" }
]

After:
reactions: [
  { user: "current", emoji: "â¤ï¸" }, â† Updated
  { user: "other1", emoji: "â¤ï¸" },
  { user: "other2", emoji: "ğŸ‘" }
]

Result: "Reaction updated"
```

---

## User Interface States

### Display Logic

```
For each emoji button:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IF user has reacted with this emoji â”‚
â”‚    â†’ Show button as ACTIVE (highlighted)
â”‚  ELSE                                 â”‚
â”‚    â†’ Show button as INACTIVE (normal) â”‚
â”‚                                       â”‚
â”‚  Display count: reactionStats[emoji] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Visual States

```
INACTIVE STATE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”¥ 5   â”‚  Normal border, no background
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ACTIVE STATE (user's reaction):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”¥ 5   â”‚  Highlighted border, colored background
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

HOVER STATE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”¥ 5   â”‚  Light background
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LOADING STATE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â³ 5   â”‚  Spinner or disabled state
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

### Toggle Reaction API Call

```
Frontend                  Backend                   Database
   â”‚                         â”‚                          â”‚
   â”‚  PUT /posts/:id/react   â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚  { emoji: "ğŸ”¥" }        â”‚                          â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Check Auth Token        â”‚
   â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
   â”‚                         â”‚              â”‚           â”‚
   â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
   â”‚                         â”‚  âœ“ Valid                 â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Find Post & Update      â”‚
   â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Post with Reactions     â”‚
   â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Calculate Stats         â”‚
   â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
   â”‚                         â”‚              â”‚           â”‚
   â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
   â”‚                         â”‚                          â”‚
   â”‚  Response with Stats    â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                         â”‚                          â”‚
   â”‚  Update UI              â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                          â”‚
   â”‚         â”‚               â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚                          â”‚
   â”‚  âœ“ Done                 â”‚                          â”‚
```

### Get Reactions API Call

```
Frontend                  Backend                   Database
   â”‚                         â”‚                          â”‚
   â”‚  GET /posts/:id/reactions                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Find Post               â”‚
   â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Post.reactions[]        â”‚
   â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Build Statistics        â”‚
   â”‚                         â”‚  - Count per emoji       â”‚
   â”‚                         â”‚  - List users per emoji  â”‚
   â”‚                         â”‚  - Find user's reaction  â”‚
   â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
   â”‚                         â”‚              â”‚           â”‚
   â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
   â”‚                         â”‚                          â”‚
   â”‚  Complete Stats Object  â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                         â”‚                          â”‚
   â”‚  Display in UI          â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                          â”‚
   â”‚         â”‚               â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚                          â”‚
```

---

## Component Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        App Component                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    PostList Component                     â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚              Post Component                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Title: "Amazing Trek"                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Description: "..."                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Images: [...]                                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚      ReactionBar Component                     â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                 â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  [ğŸ”¥ 5] [â¤ï¸ 12] [ğŸ‘ 3] [ğŸ˜ 8] [ğŸ˜± 2] [ğŸ‘ 1]â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                 â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Total: 31 reactions                           â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                       â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

State Management:
- PostList: Loads all posts
- Post: Manages post data
- ReactionBar: Manages reaction state
  - reactions: { "ğŸ”¥": { count: 5, users: [...] } }
  - userReaction: "ğŸ”¥"
  - loading: false
```

---

## Error Handling Flow

```
User Action
    â†“
Try Toggle Reaction
    â†“
    â”œâ”€â†’ Success
    â”‚     â†“
    â”‚   Update UI with new data
    â”‚     â†“
    â”‚   Show success (optional)
    â”‚
    â””â”€â†’ Error
          â†“
        â”œâ”€ 400 Bad Request
        â”‚    â””â”€â†’ Show "Invalid emoji"
        â”‚
        â”œâ”€ 401 Unauthorized
        â”‚    â””â”€â†’ Redirect to login
        â”‚
        â”œâ”€ 404 Not Found
        â”‚    â””â”€â†’ Show "Post not found"
        â”‚
        â””â”€ 500 Server Error
             â””â”€â†’ Show "Try again later"
                  Revert optimistic update (if used)
```

---

## Performance Optimization Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Optimization Strategy                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  1. Initial Load                                             â”‚
â”‚     â””â”€â†’ Fetch posts with reactions included                 â”‚
â”‚         (No separate API call needed)                        â”‚
â”‚                                                               â”‚
â”‚  2. User Interaction                                         â”‚
â”‚     â”œâ”€â†’ Optimistic UI Update (instant feedback)            â”‚
â”‚     â”œâ”€â†’ Debounce rapid clicks (prevent spam)               â”‚
â”‚     â””â”€â†’ API call to persist                                 â”‚
â”‚                                                               â”‚
â”‚  3. Real-time Updates (optional)                             â”‚
â”‚     â””â”€â†’ WebSocket for live reaction updates                 â”‚
â”‚         (from other users)                                    â”‚
â”‚                                                               â”‚
â”‚  4. Caching                                                   â”‚
â”‚     â””â”€â†’ Cache reaction stats in React state                 â”‚
â”‚         (refresh on focus/visibility change)                 â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Timeline View: User Journey

```
Time  Action                          UI State                  Backend
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
0s    User opens post                 [ğŸ”¥ 5] [â¤ï¸ 12]         GET /posts/:id
                                      (5 fire, 12 hearts)      Returns reactions
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2s    User clicks ğŸ”¥                  [ğŸ”¥ 6] [â¤ï¸ 12]         PUT /react
                                      (optimistic update)       Processing...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2.3s  API response received           [ğŸ”¥ 6] [â¤ï¸ 12]         Response: success
                                      (confirmed)              action: "added"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
5s    User changes to â¤ï¸             [ğŸ”¥ 5] [â¤ï¸ 13]         PUT /react
                                      (fire -1, heart +1)      emoji: "â¤ï¸"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
5.3s  API response received           [ğŸ”¥ 5] [â¤ï¸ 13]         Response: success
                                      (confirmed)              action: "updated"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
8s    User clicks â¤ï¸ again           [ğŸ”¥ 5] [â¤ï¸ 12]         PUT /react
                                      (removed)                emoji: "â¤ï¸"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
8.3s  API response received           [ğŸ”¥ 5] [â¤ï¸ 12]         Response: success
                                      (confirmed removed)      action: "removed"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## State Machine Diagram

```
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  NO REACTION â”‚
                      â”‚   (Initial)  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    Click any emoji
                              â”‚
                              â†“
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   REACTED    â”‚
                      â”‚  (emoji: X)  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚             â”‚             â”‚
         Click same     Click different   (Auto-refresh)
            emoji          emoji              â”‚
                â”‚             â”‚               â”‚
                â†“             â†“               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
        â”‚   REMOVEDâ”‚  â”‚   UPDATED     â”‚      â”‚
        â”‚          â”‚  â”‚  (emoji: Y)   â”‚      â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
             â”‚                â”‚               â”‚
             â”‚                â”‚               â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
              (Return to appropriate state)
```

---

This visual documentation helps developers understand the complete flow of the reactions feature!
